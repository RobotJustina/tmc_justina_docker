<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /tmp/buildd/ros-kinetic-hsrb-description-0.16.0/robots/hsrb4s.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="hsrb" xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller" xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface" xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor" xmlns:xacro="http://ros.org/wiki/xacro">
  <material name="body_main">
    <color rgba="1.0 0.0 0.0 1.0"/>
  </material>
  <material name="body_sub">
    <color rgba="0.33 0.33 0.33 1.0"/>
  </material>
  <material name="wheel">
    <color rgba="0.2 0.2 0.2 1.0"/>
  </material>
  <material name="black">
    <color rgba="0.1 0.1 0.1 1.0"/>
  </material>
  <material name="tablet">
    <color rgba="0.1 0.1 0.2 1.0"/>
  </material>
  <!--
    ASUS Xtion PRO LIVE
    Specs from:
    http://www.asus.com/Multimedia/Xtion_PRO_LIVE/#specifications
    -->
  <link name="base_footprint"/>
  <joint name="base_footprint_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint>
  <link name="base_link">
    <inertial>
      <mass value="50.00"/>
      <!-- use dummy weight to stabilize gazebo move base (real value: 11.017971)-->
      <origin xyz="-0.025978 -0.005498 0.17633"/>
      <inertia ixx="0.3742" ixy="0.000434172172" ixz="0.03088" iyy="0.3436" iyz="0.01775" izz="0.1509"/>
    </inertial>
    <collision>
      <geometry>
      </geometry>
    </collision>
  </link>
  <joint name="base_roll_joint" type="continuous">
    <origin rpy="0.0 0.0 0.0" xyz="0.0 0.0 0.0"/>
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="34.46" velocity="2.5"/>
    <parent link="base_link"/>
    <child link="base_roll_link"/>
    <dynamics damping="0.7"/>
  </joint>
  <link name="base_roll_link">
    <inertial>
      <origin xyz="-0.01948200 0.00219100 0.07101300"/>
      <mass value="10.239419"/>
      <inertia ixx="0.07671000" ixy="-0.01005000" ixz="0.00174900" iyy="0.09057000" iyz="0.00154900" izz="0.14500000"/>
    </inertial>
  </link>
  <joint name="base_r_drive_wheel_joint" type="continuous">
    <origin rpy="0.0 0.0 0.0" xyz="-0.11 -0.133 0.04"/>
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="11.067" velocity="20.8"/>
    <parent link="base_roll_link"/>
    <child link="base_r_drive_wheel_link"/>
    <dynamics damping="1.0"/>
  </joint>
  <link name="base_r_drive_wheel_link">
    <visual>
      <origin rpy="1.57079632679 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.03" radius="0.04"/>
      </geometry>
      <material name="wheel"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.03" radius="0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_l_drive_wheel_joint" type="continuous">
    <origin rpy="0.0 0.0 0.0" xyz="-0.11 0.133 0.04"/>
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="11.067" velocity="20.8"/>
    <parent link="base_roll_link"/>
    <child link="base_l_drive_wheel_link"/>
    <dynamics damping="1.0"/>
  </joint>
  <link name="base_l_drive_wheel_link">
    <visual>
      <origin rpy="1.57079632679 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.03" radius="0.04"/>
      </geometry>
      <material name="wheel"/>
    </visual>
    <collision>
      <origin rpy="1.57079632679 0.0 0.0" xyz="0.0 0.0 0.0"/>
      <geometry>
        <cylinder length="0.03" radius="0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_r_passive_wheel_x_frame_joint" type="continuous">
    <origin rpy="0.0 0.0 0.0" xyz="0.1495                 -0.055                 0.03"/>
    <axis xyz="1.0 0.0 0.0"/>
    <limit effort="1.0" velocity="3.0"/>
    <parent link="base_roll_link"/>
    <child link="base_r_passive_wheel_x_frame"/>
    <dynamics damping="1.0"/>
  </joint>
  <link name="base_r_passive_wheel_x_frame">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_r_passive_wheel_y_frame_joint" type="continuous">
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="8.85" velocity="10.0"/>
    <parent link="base_r_passive_wheel_x_frame"/>
    <child link="base_r_passive_wheel_y_frame"/>
  </joint>
  <link name="base_r_passive_wheel_y_frame">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_r_passive_wheel_z_joint" type="continuous">
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="8.85" velocity="10.0"/>
    <parent link="base_r_passive_wheel_y_frame"/>
    <child link="base_r_passive_wheel_z_link"/>
  </joint>
  <link name="base_r_passive_wheel_z_link">
    <visual>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
      <material name="wheel"/>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_l_passive_wheel_x_frame_joint" type="continuous">
    <origin rpy="0.0 0.0 0.0" xyz="0.1495                 0.055                 0.03"/>
    <axis xyz="1.0 0.0 0.0"/>
    <limit effort="1.0" velocity="3.0"/>
    <parent link="base_roll_link"/>
    <child link="base_l_passive_wheel_x_frame"/>
    <dynamics damping="1.0"/>
  </joint>
  <link name="base_l_passive_wheel_x_frame">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_l_passive_wheel_y_frame_joint" type="continuous">
    <axis xyz="0.0 1.0 0.0"/>
    <limit effort="8.85" velocity="10.0"/>
    <parent link="base_l_passive_wheel_x_frame"/>
    <child link="base_l_passive_wheel_y_frame"/>
  </joint>
  <link name="base_l_passive_wheel_y_frame">
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <joint name="base_l_passive_wheel_z_joint" type="continuous">
    <axis xyz="0.0 0.0 1.0"/>
    <limit effort="8.85" velocity="10.0"/>
    <parent link="base_l_passive_wheel_y_frame"/>
    <child link="base_l_passive_wheel_z_link"/>
  </joint>
  <link name="base_l_passive_wheel_z_link">
    <visual>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
      <material name="wheel"/>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.03"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>
  <gazebo reference="base_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="base_roll_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <mu1>0.9</mu1>
    <mu2>0.9</mu2>
  </gazebo>
  <gazebo reference="base_r_drive_wheel_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <turnGravityOff>false</turnGravityOff>
    <kp>1000000.0</kp>
    <kd>10.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
    <material value="Gazebo/FlatBlack"/>
  </gazebo>
  <gazebo reference="base_l_drive_wheel_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <turnGravityOff>false</turnGravityOff>
    <kp>1000000.0</kp>
    <kd>10.0</kd>
    <mu1>1.0</mu1>
    <mu2>1.0</mu2>
    <fdir1>1 0 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
    <material value="Gazebo/FlatBlack"/>
  </gazebo>
  <gazebo reference="base_r_passive_wheel_z_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <mu1>0.1</mu1>
    <mu2>0.1</mu2>
    <maxVel>1.0</maxVel>
    <material value="Gazebo/FlatBlack"/>
  </gazebo>
  <gazebo reference="base_l_passive_wheel_z_link">
    <selfCollide>false</selfCollide>
    <gravity>true</gravity>
    <mu1>0.1</mu1>
    <mu2>0.1</mu2>
    <maxVel>1.0</maxVel>
    <material value="Gazebo/FlatBlack"/>
  </gazebo>
  <transmission name="base_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_r_drive_wheel_joint">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="base_r_drive_wheel_joint_actuator">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="base_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_l_drive_wheel_joint">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    </joint>
    <actuator name="base_l_drive_wheel_joint_actuator">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="base_roll_joint_transmission">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="base_roll_joint">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
    <actuator name="base_roll_joint_actuator">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>
  <gazebo>
    <plugin filename="libhsrb_gazebo_ros_control.so" name="hsrb_ros_control">
      <robotNamespace>hsrb</robotNamespace>
    </plugin>
		<plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
			<legacyMode>false</legacyMode>
			<alwaysOn>true</alwaysOn>
			<updateRate>100</updateRate>
			<leftJoint>base_l_drive_wheel_joint</leftJoint>
			<rightJoint>base_r_drive_wheel_joint</rightJoint>
			<wheelSeparation>0.266</wheelSeparation>
			<wheelDiameter>0.08</wheelDiameter>
			<torque>200000</torque>
			<commandTopic>/justina/cmd_vel</commandTopic>
			<odometryTopic>/justina/odom_diffdrive</odometryTopic>
			<odometryFrame>odom</odometryFrame>
			<robotBaseFrame>base_link</robotBaseFrame>
		</plugin>
    <plugin filename="libgazebo_ros_p3d.so" name="hsrb_p3d_ground_truth">
      <robotNamespace>hsrb</robotNamespace>
      <bodyName>base_footprint</bodyName>
      <topicName>odom_ground_truth</topicName>
      <frameName>map</frameName>
      <updateRate>30</updateRate>
    </plugin>
  </gazebo>
</robot>

